## States - Ğ¡Ñ‚ĞµĞ¹Ñ‚ 
**ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ**, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ğ°Ñ ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞºĞ¾Ñ‚Ğ¾Ğ°Ñ Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ² Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ Ğ² Ğ¼Ğ¾Ğ´ĞµĞ»Ğµ, 

> Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ: ĞĞ°Ğ·Ñ‹Ğ²Ğ°Ğ¹Ñ‚Ğµ ÑĞµĞ¹Ñ‚ Ñ‚Ğ°Ğº Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ  Ğ¾Ñ‚Ğ²ĞµÑ‡Ğ°Ğ»Ğ¾ Ğ½Ğ° Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ: Ñ‡Ñ‚Ğ¾ ÑĞµĞ¹Ñ‡Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ Ñ Ğ²Ğ°ÑˆĞ¸Ğ¼ Ğ¾Ğ±ĞµĞºÑ‚Ğ¾Ğ¼?

## Routes and rules - ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¸ ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°. 

**ĞœĞ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹** ÑÑ‚Ğ¾ Ñ‚Ğ¾ ĞºÑƒĞ´Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ñ ÑÑ‚Ğ¾Ğ³Ğ¾ ÑÑ‚ĞµĞ¹Ñ‚Ğ°. 

**ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ°** - ÑÑ‚Ğ¾ Ğ¼ĞµÑ‚Ğ¾Ğ´Ñ‹ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ±ÑƒĞ´ÑƒÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½Ñ‹ Ğ¿Ñ€ĞµĞ´ afterState(), Ğ´Ğ»Ñ Ñ‚Ğ¾Ğ³Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²Ñ‹ÑĞ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ñ‚ĞµĞ½Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ Ğ¿Ñ€ĞµÑ…Ğ¾Ğ´Ğ°. ĞšĞ¾Ğ´ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ğ° Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ğ¿ĞµÑ€ĞµĞ´ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸ĞµĞ¹ ÑĞ»ĞµĞ´ÑƒÑÑ‰ĞµĞ³Ğ¾ ÑÑ‚ĞµĞ¹Ñ‚Ğ°. Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€ĞµĞºÑ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ throw Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¸Ğ· rules.

> Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ñ: Ğ½Ğµ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞ¹Ñ‚Ğµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ Ğ¼Ğ¾Ğ´Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€ÑƒÑÑ‰Ğ¸Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ, Ñ‚Ğ°Ğº ĞºĞ°Ğº Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´Ğ° Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚Ğ¼ĞµĞ½ĞµĞ½Ğ¾, ĞµÑĞ»Ğ¸ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´ Ğ¿Ğ¾ ĞºĞ°ĞºĞ¸Ğ¼Ñ‚Ğ¾ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°Ğ¼ Ğ½Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ»ÑÑ. 

## Validations

`stateValidation()` Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ Ğ½Ğ° ÑÑ‚ĞµĞ¹Ñ‚

ĞœĞ°ÑÑĞ¸Ğ² Ñ Ñ„ÑƒĞ½ĞºÑ†ÑĞ¼Ğ¸ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ²ĞµÑ€Ğ½ÑƒÑ‚ÑŒ Ğ»Ğ¾Ğ¶\Ğ¸ÑÑ‚Ğ¸Ğ½Ğ°, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ½Ğ° ÑÑ‚ĞµĞ¹Ñ‚ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»Ğ¾Ğ¶Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾. Ğ­Ñ‚Ğ¾ Ğ¿Ğ¾Ñ…Ğ¾Ğ¶Ğµ Ğ½Ğ° ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ beforeValidation

> Ğ¿Ñ€Ğ¸Ğ¼Ğ¸Ñ‡Ğ°Ğ½Ğ¸Ğµ: Ğ§Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿ĞµÑ€ĞµĞ¹Ñ‚Ğ¸ Ğ½Ğ° ÑÑ‚ĞµĞ¹Ñ‚ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ²ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ²ĞµÑ€Ğ½ÑƒĞ»Ğ¸ `true`.

### inStateCallback

`inStateCallback()` Ğ¼ĞµÑ‚Ğ¾Ğ´ ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ±ÑƒĞ´ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ğ½ Ğ¿Ñ€Ğ¸ Ğ²Ñ…Ğ¾Ğ´Ğµ Ğ½Ğ° ÑÑ‚ĞµĞ¹Ñ‚

> Ğ¿Ñ€Ğ¸Ğ¼Ğ¸Ñ‡Ğ°Ğ½Ğ¸Ğµ: Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒÑÑ‚ÑÑ

### after state callback

`afterState()`
 
> Ğ¿Ñ€Ğ¸Ğ¼Ğ¸Ñ‡Ğ°Ğ½Ğ¸Ğµ: Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒÑÑ‚ÑÑ

### TODO
1. Add states by config ğŸ—¹
2. Add/Remove states by API ğŸ—¹
3. Add/Remove routes by API ğŸ—¹
4. Validation beforeNext() ğŸ—¹
5. Select next state by cutom routes ğŸ—¹
6. List of all routes
7. error when create model with not startState



### Config


```

//const State = require('sails-hook-stateflow').State;
module.exports.stateflow = {
  models: {
    /** If no model defined in sails.config.stateflow, hook use Order model */

    NotOrder: {
      /** Default state */
      stateField: "not_state",
      
      /** Create attribute of waterline model with required option. by default false*/
      waterlineRequired: true,

      /** Generate init states */
      states: {
        alpha: ["beta"],
        beta: ["gama"],
        gama: ["zeta"],
        zeta: ["alpha"],
      },
    },

    Order: {
      /** if you set statrtState you must make waterlineRequired = false */
      startState: "ONE",
      states: {
        ONE: ["TWO"],
        TWO: ["THREE", "FOUR"],
        TRHEE: ["ONE", "FOUR"],
        FOUR: [],
      },
    },
  },
};


```


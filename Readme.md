## States - –°—Ç–µ–π—Ç 
**—Å–æ—Å—Ç–æ—è–Ω–∏–µ**, –ø—Ä–æ—Å—Ç–æ —É–Ω–∏–∫–∞–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ –∫–æ—Ç–æ–∞—è –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –ø–æ–ª–µ –≤ –º–æ–¥–µ–ª–µ, 

> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –ù–∞–∑—ã–≤–∞–π—Ç–µ —Å–µ–π—Ç —Ç–∞–∫ —á—Ç–æ–±—ã –Ω–∞–∑–≤–∞–Ω–∏–µ  –æ—Ç–≤–µ—á–∞–ª–æ –Ω–∞ –≤–æ–ø—Ä–æ—Å: —á—Ç–æ —Å–µ–π—á–∞—Å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –≤–∞—à–∏–º –æ–±–µ–∫—Ç–æ–º?

## Routes and rules - –ú–∞—Ä—à—Ä—É—Ç—ã –∏ –ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞. 

**–ú–∞—Ä—à—Ä—É—Ç—ã** —ç—Ç–æ —Ç–æ –∫—É–¥–∞ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ —Å —ç—Ç–æ–≥–æ —Å—Ç–µ–π—Ç–∞. 

**–ü—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞** - —ç—Ç–æ –º–µ—Ç–æ–¥—ã –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã –ø—Ä–µ–¥ afterState(), –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—ã—è–≤–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã –ø—Ä–µ—Ö–æ–¥–∞. –ö–æ–¥ –º–∞—Ä—à—Ä—É—Ç–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å—Ç–µ–π—Ç–∞. –ß—Ç–æ–±—ã –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–∑–≤–∞—Ç—å throw –≤ –æ–¥–Ω–æ–º –∏–∑ rules.

> –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –Ω–µ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç–º–µ–Ω–µ–Ω–æ, –µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–∞–∫–∏–º—Ç–æ –ø—Ä–∏—á–∏–Ω–∞–º –Ω–µ —Å–æ—Å—Ç–æ—è–ª—Å—è. 


–û—á–µ—Ä–µ–¥—å –ø–µ—Ä–µ—Ö–æ–¥–∞:
1. stateValidation()
2. –û–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª–µ —Å—Ç–µ–π—Ç –≤ –º–æ–¥–µ–ª–µ
3. inState() —Ç–æ–≥–æ —Å—Ç–µ–π—Ç–∞ –≤–∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ—à–ª–∏
4. afterState() –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —Å—Ç–µ–π—Ç–∞

## Validations

`stateValidation()` –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ —Å—Ç–µ–π—Ç

–ú–∞—Å—Å–∏–≤ —Å —Ñ—É–Ω–∫—Ü—è–º–∏ –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –≤–µ—Ä–Ω—É—Ç—å –ª–æ–∂\–∏—Å—Ç–∏–Ω–∞, —á—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–µ–π—Ç –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ. –≠—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —É—Å–ª–æ–≤–∏—è beforeValidation

> –ø—Ä–∏–º–∏—á–∞–Ω–∏–µ: –ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç–µ–π—Ç –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–µ—Ä–Ω—É–ª–∏ `true`.

### inStateCallback

`inStateCallback()` –º–µ—Ç–æ–¥ –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –ø—Ä–∏ –≤—Ö–æ–¥–µ –Ω–∞ —Å—Ç–µ–π—Ç

> –ø—Ä–∏–º–∏—á–∞–Ω–∏–µ: –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

### after state callback

`afterState()`
 
> –ø—Ä–∏–º–∏—á–∞–Ω–∏–µ: –æ—à–∏–±–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è

### TODO
1. Add states by config üóπ
2. Add/Remove states by API üóπ
3. Add/Remove routes by API üóπ
4. Validation beforeNext() üóπ
5. Select next state by cutom routes üóπ
6. List of all routes
7. error when create model with not startState



### Config


```

//const State = require('sails-hook-stateflow').State;
module.exports.stateflow = {
  models: {
    /** If no model defined in sails.config.stateflow, hook use Order model */

    NotOrder: {
      /** Default state */
      stateField: "not_state",
      
      /** Create attribute of waterline model with required option. by default false*/
      waterlineRequired: true,

      /** Generate init states */
      states: {
        alpha: ["beta"],
        beta: ["gama"],
        gama: ["zeta"],
        zeta: ["alpha"],
      },
    },

    Order: {
      /** if you set statrtState you must make waterlineRequired = false */
      startState: "ONE",
      states: {
        ONE: ["TWO"],
        TWO: ["THREE", "FOUR"],
        TRHEE: ["ONE", "FOUR"],
        FOUR: [],
      },
    },
  },
};


```
1. –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å next —á—Ç–æ–±—ã –∑–∞–ø—É—Å–∏—Ç—å  –ø–µ—Ä–≤—ã–π —Å—Ç–µ–π—Ç, –µ—Å–ª–∏ —Å–æ–∑–¥–∞–Ω–æ —Å—Ä–∞–∑—É —Å —Å—Ç–µ–π—Ç–æ–º, —Ç–æ –ø–æ–ª—É—á–∞–µ—Ç —á—Ç–æ inState –Ω–µ –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –Ω–∏–∫–æ–≥–¥–∞.

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞—Ç—á–∞–º–∏ dark-sails